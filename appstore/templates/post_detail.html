{% extends 'base.html' %}
{% load static %}

{% block title %}{{ post.title }} - Details{% endblock %}

{% block content %}
  <div class="post-detail">
    <h2>{{ post.title }}</h2>
    <p>{{ post.content }}</p>
    <p><strong>Category:</strong> {{ post.get_category_display }}</p>
    <p><strong>Rating:</strong> {{ post.rating }} ☆</p>
    <p><strong>Views:</strong> {{ post.views }}</p>
    <p><strong>Likes:</strong> {{ post.likes }}</p>
    <p><strong>Created:</strong> {{ post.created_at }}</p>

    <hr>
    <h3>Reviews</h3>
    {% for review in reviews %}
      <div class="review">
        <p><strong>{{ review.author.username }}</strong> rated it {{ review.rating }} ☆</p>
        <p>{{ review.comment }}</p>
        <p><em>{{ review.created_at }}</em></p>
      </div>
    {% empty %}
      <p>No reviews yet.</p>
    {% endfor %}

    <hr>
    {% if user.is_authenticated %}
      <h3>Leave a Review</h3>
      <form method="post">
        {% csrf_token %}
        {{ form.as_p }}
        <button type="submit">Submit Review</button>
      </form>
    {% else %}
      <p><a href="{% url 'login' %}">Log in</a> to leave a review.</p>
    {% endif %}
  </div>
{% endblock %}